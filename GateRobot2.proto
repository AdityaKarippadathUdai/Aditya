#VRML_SIM R2025a utf8

PROTO GateRobot2 [
  field SFVec3f translation 0 0 0
  field SFRotation rotation 0 0 1 0
  field SFString name "GateEntry"
] {
  Robot {
    translation IS translation
    rotation IS rotation
    name IS name
    children [

      # Left Pillar
      Transform {
        translation -2.0 0 1.0
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0 0 1
              }
            }
            geometry Box {
              size 0.2 0.2 2.0
            }
          }
        ]
      }

      # Right Pillar
      Transform {
        translation 2.0 0 1.0
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0 0 1
              }
            }
            geometry Box {
              size 0.2 0.2 2.0
            }
          }
        ]
      }

      # Connecting Bar between Pillars
      Transform {
        translation 0 0 2.0
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0 0 1
              }
            }
            geometry Box {
              size 4.2 0.2 0.2
            }
          }
        ]
      }

      # Cameras (One Facing Entry, One Facing Exit)
      Transform {
        translation 0 0 1.8
        children [
          # Entry Camera (Facing entry side)
          Transform {
            rotation 1 1 0 3.14  # Facing entry
            children [
              Camera {
                name "entry_camera"
                width 640
                height 480
                fieldOfView 1.0
              }
            ]
          }
          
          # Exit Camera (Facing exit side)
          Transform {
            rotation 3.14 -3.14 0 3.14 # Facing exit
            children [
              Camera {
                name "exit_camera"
                width 640
                height 480
                fieldOfView 1.0
              }
            ]
          }
        ]
      }

      # Emitters
      Emitter {
        name "entry_emitter"
      }
      Emitter {
        name "exit_emitter"
      }
    ]

    controller "gate_sql"
  }
}
