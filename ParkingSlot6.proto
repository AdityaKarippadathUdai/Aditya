#VRML_SIM R2025a utf8
PROTO ParkingSlot6 [
  field SFVec3f    translation      0 0 0        # Position of the parking system
  field SFRotation rotation         0 0 1 0      # Rotation of the parking system
  field SFString   name             "parking_system_1" # Unique name for the system
]
{
  Robot {
    translation IS translation
    rotation IS rotation
    name IS name
    controller "parking_controller_6"    # Controller for this parking system

    children [
      # Sensor Mount 1 (at x = 0)
      Transform {
        translation 0 0 0.25  # Spacing: 0m; cube center at 0.25m height
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0.7 0.7 0.7  # Light gray for the mount
              }
            }
            geometry Box {
              size 0.5 0.5 0.5  # Cube with equal sides (0.5m x 0.5m x 0.5m)
            }
          }
        ]
      }
      Transform {
        translation 0.05 0 0.25  # Sensor offset 0.05m along x from cube center
        rotation 0 1 0 1.57      # Rotate 90 degrees around y-axis to point along positive x-axis
        children [
          DistanceSensor {
            name "parking_sensor_1"  # Unique name
            lookupTable [
              0.0 0.0 0.0,    # Min range (0m)
              5.0 5.0 0.0     # Max range (5m)
            ]
            resolution 0.01
          }
          Transform {
            translation 0 0.1 0  # Offset along y-axis (local y becomes z in world)
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0  # Red color for visibility
                  }
                }
                geometry Sphere { radius 0.05 }  # First circle
              }
            ]
          }
          Transform {
            translation 0 -0.1 0  # Offset along y-axis (local y becomes z in world)
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0  # Red color for visibility
                  }
                }
                geometry Sphere { radius 0.05 }  # Second circle
              }
            ]
          }
        ]
      }
      Transform {
        translation 0.15 0 0.25  # Adjusted to align with sensor
        rotation 0 1 0 1.57      # Align with sensor direction (pointing along positive x-axis)
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 1 0 0  # Red color
              }
            }
            geometry Cone {
              bottomRadius 0.05
              height 0.1
            }
          }
        ]
      }

      # Sensor Mount 2 (at x = 2)
      Transform {
        translation 2 0 0.25
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0.7 0.7 0.7
              }
            }
            geometry Box {
              size 0.5 0.5 0.5
            }
          }
        ]
      }
      Transform {
        translation 2.05 0 0.25
        rotation 0 1 0 1.57
        children [
          DistanceSensor {
            name "parking_sensor_2"
            lookupTable [
              0.0 0.0 0.0,
              5.0 5.0 0.0
            ]
            resolution 0.01
          }
          Transform {
            translation 0 0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
          Transform {
            translation 0 -0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
        ]
      }
      Transform {
        translation 2.15 0 0.25
        rotation 0 1 0 1.57
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 1 0 0
              }
            }
            geometry Cone {
              bottomRadius 0.05
              height 0.1
            }
          }
        ]
      }

      # Sensor Mount 3 (at x = 4)
      Transform {
        translation 4 0 0.25
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0.7 0.7 0.7
              }
            }
            geometry Box {
              size 0.5 0.5 0.5
            }
          }
        ]
      }
      Transform {
        translation 4.05 0 0.25
        rotation 0 1 0 1.57
        children [
          DistanceSensor {
            name "parking_sensor_3"
            lookupTable [
              0.0 0.0 0.0,
              5.0 5.0 0.0
            ]
            resolution 0.01
          }
          Transform {
            translation 0 0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
          Transform {
            translation 0 -0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
        ]
      }
      Transform {
        translation 4.15 0 0.25
        rotation 0 1 0 1.57
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 1 0 0
              }
            }
            geometry Cone {
              bottomRadius 0.05
              height 0.1
            }
          }
        ]
      }

      # Sensor Mount 4 (at x = 6)
      Transform {
        translation 6 0 0.25
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0.7 0.7 0.7
              }
            }
            geometry Box {
              size 0.5 0.5 0.5
            }
          }
        ]
      }
      Transform {
        translation 6.05 0 0.25
        rotation 0 1 0 1.57
        children [
          DistanceSensor {
            name "parking_sensor_4"
            lookupTable [
              0.0 0.0 0.0,
              5.0 5.0 0.0
            ]
            resolution 0.01
          }
          Transform {
            translation 0 0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
          Transform {
            translation 0 -0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
        ]
      }
      Transform {
        translation 6.15 0 0.25
        rotation 0 1 0 1.57
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 1 0 0
              }
            }
            geometry Cone {
              bottomRadius 0.05
              height 0.1
            }
          }
        ]
      }

      # Sensor Mount 5 (at x = 8)
      Transform {
        translation 8 0 0.25
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0.7 0.7 0.7
              }
            }
            geometry Box {
              size 0.5 0.5 0.5
            }
          }
        ]
      }
      Transform {
        translation 8.05 0 0.25
        rotation 0 1 0 1.57
        children [
          DistanceSensor {
            name "parking_sensor_5"
            lookupTable [
              0.0 0.0 0.0,
              5.0 5.0 0.0
            ]
            resolution 0.01
          }
          Transform {
            translation 0 0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
          Transform {
            translation 0 -0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
        ]
      }
      Transform {
        translation 8.15 0 0.25
        rotation 0 1 0 1.57
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 1 0 0
              }
            }
            geometry Cone {
              bottomRadius 0.05
              height 0.1
            }
          }
        ]
      }

      # Sensor Mount 6 (at x = 10)
      Transform {
        translation 10 0 0.25
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 0.7 0.7 0.7
              }
            }
            geometry Box {
              size 0.5 0.5 0.5
            }
          }
        ]
      }
      Transform {
        translation 10.05 0 0.25
        rotation 0 1 0 1.57
        children [
          DistanceSensor {
            name "parking_sensor_6"
            lookupTable [
              0.0 0.0 0.0,
              5.0 5.0 0.0
            ]
            resolution 0.01
          }
          Transform {
            translation 0 0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
          Transform {
            translation 0 -0.1 0
            children [
              Shape {
                appearance Appearance {
                  material Material {
                    diffuseColor 1 0 0
                  }
                }
                geometry Sphere { radius 0.05 }
              }
            ]
          }
        ]
      }
      Transform {
        translation 10.15 0 0.25
        rotation 0 1 0 1.57
        children [
          Shape {
            appearance Appearance {
              material Material {
                diffuseColor 1 0 0
              }
            }
            geometry Cone {
              bottomRadius 0.05
              height 0.1
            }
          }
        ]
      }

      # Display for Interface (Positioned at the end of the system)
      Display {
        width 200
        height 100
        name "sensor_display"
        translation 12 0 0.5  # Positioned after the last sensor (10m + 2m offset, above cubes)
      }
    ]

    # Bounding Object for the Entire System
    boundingObject Transform {
      translation 5 0 0.25  # Centered at the middle of the 6 sensors (10m / 2)
      children [
        Box { 
          size 12 0.5 0.5  # Spans 12m (6 sensors x 2m spacing) x 0.5m x 0.5m
        }
      ]
    }
  }
}